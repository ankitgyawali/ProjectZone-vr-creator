<!DOCTYPE HTML>
<html>
<head>
    <title>Zone</title>
    <meta name="description" content="Google VR Creator">
    <meta name="keywords" content="Google VR, Virtual Reality,VR,vr,google cardboard,VR creator,create vr">
        <meta name="author" content="Ankit Gyawali">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.css">

    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <meta name="viewport" content="width=device-width"> 
   
    <script>
        $(document).ready( function() {
            //alert('hover');
                   
            $('.object').click(function() {
                
                var whichCategory = $(this).parent();
                var copy=$(this).clone();
                 _currentFill = "fill:#FFFDF1";
                //$(this).css("position","absolute");
                //$(this).css("z-index","100");

                copy.css("position" , "absolute");
                copy.addClass('draggable');
                copy.addClass('grab');
     
                $('.workspace').append(copy);
                $('.draggable').draggable({containment: ".workspace", scroll: false });

                $(".grab").on("dblclick", function(){
                    $(this).remove();
                });
                
                 $(".grab svg circle").on("click", function(){
                   // alert("click");
                   console.log("filled");
                    $(this).addClass('filled');
                   $(this).attr('style', _currentFill); 
                });

                 $(".grab svg path").on("click", function(){
                   // alert("click");
                   $(this).attr('style', _currentFill); 
                });
 
                $(".grab svg polygon").on("click", function(){
                   // alert("click");
                   $(this).attr('style', _currentFill); 
                });
                
                $(".grab svg rect").on("click", function(){
                   // alert("click");
                   $(this).attr('style', _currentFill); 
                });
                
                $(".grab svg polygon").on("click", function(){
                   // alert("click");
                   $(this).attr('style', _currentFill); 
                });
                
            });
        });        
    </script>
   <script type="text/javascript">
var y = document.getElementById("firstTest");
console.log(y);

   </script>
</head>

<body ng-controller="">
    
    <div class="viewport">
    
        <div class="toolbar">
            
            <div id="logo">
                <a href="index.html"><img src="images/LOGO.svg"></a>
            </div>
            
            <div id="shapes">
                
                <div class="object" id="smallcube" >
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <rect fill="#FFFEF5" width="600" height="600"/>
                    </svg>
                </div>
                
                <div class="object" id="mediumcube">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <rect fill="#FFFEF5" width="600" height="600"/>
                    </svg>
                </div>
                
                <div class="object" id="largecube">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <rect fill="#FFFEF5" width="600" height="600"/>
                    </svg>
                </div>
                
                <div class="object" id="smallsphere">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <circle fill="#FFFEF5" cx="300" cy="300" r="300"/>
                    </svg>
                </div>
                
                <div class="object" id="mediumsphere">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <circle fill="#FFFEF5" cx="300" cy="300" r="300"/>
                    </svg>
                </div>
                
                <div class="object" id="largesphere">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <circle fill="#FFFEF5" cx="300" cy="300" r="300"/>
                    </svg>
                </div>
                
                <div class="object" id="smallpyramid">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <polygon fill="#FFFEF5" points="3.9,550.4 300,37.6 596.1,550.4 "/>
                    </svg>
                </div>
                
                <div class="object" id="mediumpyramid">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <polygon fill="#FFFEF5" points="3.9,550.4 300,37.6 596.1,550.4 "/>
                    </svg>
                </div>
                
                <div class="object" id="largepyramid">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <polygon fill="#FFFEF5" points="3.9,550.4 300,37.6 596.1,550.4 "/>
                    </svg>
                </div>
                
                <div class="object" id="smallprism">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <rect x="147.8" fill="#FFFEF5" width="304.5" height="600"/>
                    </svg>
                </div>
                
                <div class="object" id="mediumprism">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <rect x="147.8" fill="#FFFEF5" width="304.5" height="600"/>
                    </svg>
                </div>
                
                <div class="object" id="largeprism">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <rect x="147.8" fill="#FFFEF5" width="304.5" height="600"/>
                    </svg>
                </div>
                
                <div class="object" id="smallcone">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <path fill="#FFFEF5" d="M585.3,505.3L299.1,9.1L12.8,505.3c0,47.1,129,85.7,287.2,85.7s287.2-38.6,287.2-85.7H585.3z"/>
                    </svg>
                </div>
                
                <div class="object" id="mediumcone">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <path fill="#FFFEF5" d="M585.3,505.3L299.1,9.1L12.8,505.3c0,47.1,129,85.7,287.2,85.7s287.2-38.6,287.2-85.7H585.3z"/>
                    </svg>
                </div>
                
                <div class="object" id="largecone">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" style="enable-background":new 0 0 600 600; xml:space="preserve">
                        <path fill="#FFFEF5" d="M585.3,505.3L299.1,9.1L12.8,505.3c0,47.1,129,85.7,287.2,85.7s287.2-38.6,287.2-85.7H585.3z"/>
                    </svg>
                </div>
                
                <div class="object" id="smalldodecahedron">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <polygon fill="#FFFEF5" points="114.1,584.1 0,232.9 298.8,15.9 597.5,232.9 483.4,584.1 "/>
                    </svg>
                </div>
                
                <div class="object" id="mediumdodecahedron">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <polygon fill="#FFFEF5" points="114.1,584.1 0,232.9 298.8,15.9 597.5,232.9 483.4,584.1 "/>
                    </svg>
                </div>
                
                <div class="object" id="largedodecahedron">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
                        <polygon fill="#FFFEF5" points="114.1,584.1 0,232.9 298.8,15.9 597.5,232.9 483.4,584.1 "/>
                    </svg>
                </div>

            </div>
            
<!--            <div id="colors">-->
            
                <svg id="colors" viewBox="-3.5 0 60 100">
                    
                    <rect style="fill:#6EBE44" x="0"  y="0" width="16" height="9"/>
                    
                    <rect style="fill:#A5CE46" x="18" y="0" width="16" height="9"/>
                    
                    <rect style="fill:#F7EE60" x="36"  y="0" width="16" height="9"/>
                    
                    <rect style="fill:#009050" x="0"  y="11" width="16" height="9"/>
                    
                    <rect style="fill:#908F53" x="18" y="11" width="16" height="9"/>
                    
                    <rect style="fill:#F68F5A" x="36"  y="11" width="16" height="9"/>
                    
                    <rect style="fill:#014B50" x="0"  y="22" width="16" height="9"/>
                    
                    <rect style="fill:#914955" x="18" y="22" width="16" height="9"/>
                    
                    <rect style="fill:#EF4C58" x="36"  y="22" width="16" height="9"/>
                    
                    <rect style="fill:#191750" x="0"  y="33" width="16" height="9"/>
                    
                    <rect style="fill:#651B57" x="18" y="33" width="16" height="9"/>
                    
                    <rect style="fill:#ED1A59" x="36"  y="33" width="16" height="9"/>
                    
                    <rect style="fill:#2B328F" x="0"  y="44" width="16" height="9"/>
                    
                    <rect style="fill:#8E2B90" x="18" y="44" width="16" height="9"/>
                    
                    <rect style="fill:#E63894" x="36"  y="44" width="16" height="9"/>
                    
                    <rect style="fill:#066BA9" x="0"  y="55" width="16" height="9"/>
                    
                    <rect style="fill:#6D6FAA" x="18" y="55" width="16" height="9"/>
                    
                    <rect style="fill:#EE519C" x="36"  y="55" width="16" height="9"/>
                    
                    <rect style="fill:#00AFAB" x="0"  y="66" width="16" height="9"/>
                    
                    <rect style="fill:#9AB0AD" x="18" y="66" width="16" height="9"/>
                    
                    <rect style="fill:#F9B6A3" x="36"  y="66" width="16" height="9"/>
                    
                    <rect style="fill:#6CC395" x="0"  y="77" width="16" height="9"/>
                    
                    <rect style="fill:#A0D299" x="18" y="77" width="16" height="9"/>
                    
                    <rect style="fill:#F7F3A9" x="36"  y="77" width="16" height="9"/>
                    
                    <rect id="selection" style="stroke:#FFFDF1; stroke-opacity: 1;fill:none" x="0" y="0" width="16" height="9"/>
                
                </svg>
            
            <div id="light">
                <div id="alllights">

        
                <div id="greenlight"></div>
                <div id="redlight"></div>
                <div id="bluelight"></div>
                <div id="yellowlight"></div>
                <div id="naturallight"></div>
            </div>
            </div>
            
            <div class="buttons">
                
                <div class="button" id="shapeButton">
                     <a href="#shapes"><h2>SHAPE</h2></a>
                </div>
                
                <div class="button" id="colorButton">
                    <a href="#colors"><h2>COLOR</h2></a>
                </div>
                
                <div class="button" id="lightButton">
                     <a href="#lights"><h2>LIGHT</h2></a>
                </div>
                
                
                <script>
                     $("#shapeButton").click(function () {
                         $("#colors").hide();
                         $("#light").hide();
                         $("#shapes").show();
                         $("#colorInstruct").hide();
                         $("#lightInstruct").hide();
                         $("#shapeInstruct").show();
                        // e.stopPropagation();
                     });
                     
                     $("#colorButton").click(function () {
                         $("#shapes").hide();
                         $("#light").hide();
                         $("#colors").show();
                         $("#shapeInstruct").hide();
                         $("#lightInstruct").hide();
                         $("#colorInstruct").show();
                         
                        // e.stopPropagation();
                    });
                     
                    $("#lightButton").click(function () {
                        $("#shapes").hide();
                        $("#colors").hide();
                        $("#light").show();
                        $("#shapeInstruct").hide();
                         $("#colorInstruct").hide();
                         $("#lightInstruct").show();
                        //e.stopPropagation();
                    }); 
                </script>
                
            </div>
            
        </div>
        
        <div id="buildViewport">
        
            <div class="workspace">
                
                <script>
                    var _currentFill = "fill:#FFFDF1";
                    $(".object").click(function (event) { $(event.target).attr('style', _currentFill); 
                    $(event.target).attr('style', "fill:#FFFDF1");
                                                        })
                    var $swatches = $("#colors");
                    $swatches.click(function (event) { 
                        $swatch = $(event.target);
                        loc = [parseInt($swatch.attr('x'), 10),
                               parseInt($swatch.attr('y'), 10)]
                        $("#selection", $swatches).attr('x', loc[0]);
                        $("#selection", $swatches).attr('y', loc[1]);
                        _currentFill = $swatch.attr('style'); ; 
                        
                        //alert(_currentFill);
                    })
                </script>
                
            </div>
        
        </div>
        
        <div class="instructions">
            
                <div class="miscInstruct" id="shapeInstruct">
                 #1<br>
                <a style="color:blue" href="index.html">Back to main</a> <br><br>
                <a style="color:blue" href="index.html#/learn">Back to tutorial</a>

                <button onClick="savetoDB();"> Save to database </button>
                <br><br>

                Pick room light color: <br><input type='text'  value="#FFFFFF" id="lightpicker" />

                <script type="text/javascript">
                    
                    $("#lightpicker").spectrum({
                        preferredFormat: "hex",
                        color: "#fff"
                    });
                </script>
                <br><br>

                Wall1:  
                <select id="wall1">
                    <option>black-tile.png</option>    
                    <option>brick.png</option>    
                    <option>checker.png</option>    
                    <option>dark-water.png</option>    
                    <option>grassy.png</option>    
                    <option>gravel.png</option>    
                    <option>stone.png</option>    
                </select>

                <br>
                Wall2: 
                  <select id="wall2">
                    <option>black-tile.png</option>    
                    <option>brick.png</option>    
                    <option>checker.png</option>    
                    <option>dark-water.png</option>    
                    <option>grassy.png</option>    
                    <option>gravel.png</option>    
                    <option>stone.png</option>    
                </select>

                 <br>
                Wall3: 
                  <select id="wall3">
                    <option>black-tile.png</option>    
                    <option>brick.png</option>    
                    <option>checker.png</option>    
                    <option>dark-water.png</option>    
                    <option>grassy.png</option>    
                    <option>gravel.png</option>    
                    <option>stone.png</option>    
                </select>

                <br>
                Wall4 : 

                  <select id="wall4">
                    <option>black-tile.png</option>    
                    <option>brick.png</option>    
                    <option>checker.png</option>    
                    <option>dark-water.png</option>    
                    <option>grassy.png</option>    
                    <option>gravel.png</option>    
                    <option>stone.png</option>    
                </select>

                <br>
                Ceiling: 
                  <select id="ceiling">
                    <option>black-tile.png</option>    
                    <option selected>brick.png</option>    
                    <option>checker.png</option>    
                    <option>dark-water.png</option>    
                    <option>grassy.png</option>    
                    <option>gravel.png</option>    
                    <option>stone.png</option>    
                </select>
                <br>

                     Floor: 
                  <select id="floor">
                    <option>black-tile.png</option>    
                    <option>brick.png</option>    
                    <option>checker.png</option>    
                    <option>dark-water.png</option>    
                    <option>grassy.png</option>    
                    <option>gravel.png</option>    
                    <option selected>stone.png</option>    
                </select>
                <br>

                <script type="text/javascript">
                    function savetoDB(){
                        var mainJSON = {};
                        
                        var workelem = document.getElementsByClassName('workspace');
                        var arr = [].slice.call(workelem);
                        console.log(arr);
                        if(arr[0].children.length==1){
                            mainJSON.emptyRoom = true;
                        }
                        else{
                            mainJSON.emptyRoom = false;
                            mainJSON.object = [];

                            for(i=1;i<arr[0].children.length;i++){
                                var newObj = {};
                    
                                if(!arr[0].children[i].style.top){

                                      newObj.x = 0;
                                      newObj.y = 0;
                                }
                                else
                                {

                                newObj.x = parseInt(arr[0].children[i].style.top, 10);
                                newObj.y = parseInt(arr[0].children[i].style.left, 10);
                                }
                                
                                newObj.color = arr[0].children[i].firstElementChild.innerHTML.split(":#").pop().substring(0,6);
                              
                               
                      
                                console.log( $('#wall1').val());

                                newObj.type= arr[0].children[i].id;
                                
                                mainJSON.object.push(newObj);


                            }
               
                        }

                        mainJSON.roomColor = $('#lightpicker').val();

                         mainJSON.wall1 = $('#wall1').val();
                          mainJSON.wall2 = $('#wall2').val();
                           mainJSON.wall3 = $('#wall3').val();
                            mainJSON.wall4 = $('#wall4').val();
                              mainJSON.ceiling = $('#ceiling').val();
                                 mainJSON.floor = $('#floor').val();

                        console.log(JSON.stringify(mainJSON));
                        // if(arr[0].children[1].style.top){
                        //     console.log(arr[0].children[1].style.top);
                        // }
                        //  else
                        //  {
                        //     console.log(0);
                        //  }

                    }

                </script>
                </div>
                
                <div class="miscInstruct" id="colorInstruct">
                            #2<br>
                     <a href="index.html">Back to main</a> <br><br>
                <a href="index.html#/learn">Back to tutorial</a>

                </div>
                
                <div class="miscInstruct" id="lightInstruct">
                     #3<br>
                     <a href="index.html">Back to main</a> <br><br>
                <a href="index.html#/learn">Back to tutorial</a>

                </div>
                
            </div>
        
    </div>

</body>
    
    

</html>